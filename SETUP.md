# Инструкция по настройке системы аренды лодок

## Функционал

### Роли пользователей:
1. **Клиент** - может просматривать услуги, осуществлять бронирование, редактировать данные аккаунта
2. **Арендодатель** - может добавлять услуги, составлять расписание, редактировать данные аккаунта
3. **Администратор** - просматривает статистику системы

### Регистрация:
- Форма регистрации с выбором роли через радио-кнопки
- Для клиента обязательно указание даты рождения (для расчета скидок)
- Для арендодателя и администратора дата рождения не обязательна

### Профили:
- Каждая роль имеет свою страницу профиля
- Внизу профиля отображается имя и роль пользователя
- Клиент: просмотр услуг, бронирование, редактирование данных
- Арендодатель: добавление услуг, расписание, редактирование данных
- Администратор: статистика системы

## Установка без Docker

### Требования:
- PHP 7.4+
- MySQL 5.7+
- Node.js 16+
- Apache/Nginx

### Шаги:

1. **Настройка базы данных:**
   ```sql
   CREATE DATABASE boat_rental_system;
   USE boat_rental_system;
   ```
   
   Затем выполните SQL из файла `init.sql` для создания таблиц и добавления поля `role`.

2. **Настройка PHP API:**
   - Обновите настройки подключения к БД в `api/config.php` и `api/db.php`
   - Убедитесь, что Apache настроен на обработку PHP

3. **Настройка React приложения:**
   ```bash
   cd react-admin
   npm install
   npm start
   ```

4. **Доступ:**
   - React: http://localhost:3000
   - PHP API: http://localhost/boat_rental/api/

## Установка с Docker

### Требования:
- Docker
- Docker Compose

### Шаги:

1. **Запуск проекта:**
   ```bash
   docker-compose up -d
   ```

2. **Доступ:**
   - React: http://localhost:3000
   - PHP API: http://localhost:8080/api/
   - База данных: localhost:3306

3. **Остановка:**
   ```bash
   docker-compose down
   ```

Подробнее см. `README_DOCKER.md`

## Структура базы данных

### Таблица users:
- `id_user` - ID пользователя
- `name` - Имя
- `email` - Email (уникальный)
- `password` - Пароль (MD5)
- `birth_date` - Дата рождения (обязательна для клиентов)
- `role` - Роль: 'client', 'owner', 'admin'
- `created_at` - Дата регистрации

## API Endpoints

### Аутентификация:
- `POST /api/auth/login.php` - Вход
- `GET /api/auth/get_current.php?user_id={id}` - Получить текущего пользователя

### Пользователи:
- `GET /api/users/get.php` - Список пользователей
- `POST /api/users/create.php` - Создать пользователя
- `POST /api/users/update_simple.php` - Обновить пользователя
- `DELETE /api/users/delete.php?id={id}` - Удалить пользователя

## Использование

1. Зарегистрируйтесь через форму регистрации, выбрав роль
2. Войдите в систему
3. В зависимости от роли, вы будете перенаправлены на соответствующую страницу профиля
4. Администраторы также имеют доступ к административной панели через главное меню
